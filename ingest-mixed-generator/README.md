---
layout: page
title: ingest-mixed-generator
permalink: /ingest-mixed-generator/
---
<!-- README.md is auto generated from README-template.md by calling ingest-mixed-generator with the `--update-docs` argument -->

`ingest-mixed-generator` is a tool that produces ingest messages on a Kafka topic comprising events, attachments, and user feedback. These messages are normally generated by Relay.

`ingest-mixed-generator` can be configured using a settings file (json or yaml) via the `-f` or `--settings-file` argument or directly through command line arguments.

**NOTE**: At this point, this generator creates messages that are structurally valid to pass through the ingest consumer. These messages neither emulate realistic traffic distributions, nor will they pass the processing pipeline or `save_event`.

The following arguments are available in the settings file:

```yaml
kafka:
  bootstrap.servers: "127.0.0.1:9092"
org: 1
projects: [5, 6, 7, 8, 9, 10]
# time spread of timestamp from now. will generate messages with timestamp
# anywhere between `now` and `now - spread`
spread: 2h
# the basic messages that will be generated on the topic. possible values:
# event, attachment_chunk, attachment, user_report. attachment_chunk requires
# either event or attachment to be enabled.
message_types:
  - event
  - attachment
  - attachment_chunk
  - user_report
# if `event` is selected as message type, this controls the event types.
event_types:
  - transaction
  - error
  - default

```

The following arguments are available in the command line:

```
Usage: main.py [OPTIONS]

  Populates the ingest-metrics kafka topic with messages

Options:
  -n, --num-messages TEXT         The number of messages to send to the kafka
                                  queue
  -f, --settings-file TEXT        The settings file name (json or yaml)
  -t, --topic-name TEXT           The name of the ingest metrics topic
  -b, --broker TEXT               Kafka broker address and port (e.g.
                                  localhost:9092)
  --timestamp INTEGER             Timestamp reference to use. If exactly
                                  repeatable tests are desired then a timestamp
                                  ref can be used
  -s, --spread TEXT               Time spread from timestamp backward, (e.g.
                                  1w2d3h4m5s 1 week 2 days 3 hours 4 minutes 5
                                  seconds)
  -o, --org INTEGER               organization id
  -p, --project INTEGER           project id
  -m, --message-type [event|attachment_chunk|attachment|user_report]
                                  message types to generate
  -e, --event-type [transaction|error|default]
                                  event types to generate
  --dry-run                       if set only prints the settings
  --update-docs                   creates a README.md  documentation file
  --help                          Show this message and exit.
```
